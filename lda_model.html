
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/bmabey/pyLDAvis/files/ldavis.v1.0.0.css">
<!-- Did not change CSS from original yet -->
<body>
  <h3 id="sliderheader">Slider input</h3>
  <input type="range" min="31" max="34" value="31" class="slider" id="num">
  <br>
  <h3>Button input</h3>
  <button onclick="visualise('wk31', wk31_data)">Week 31</button>
  <button onclick="visualise('wk32', wk32_data)">Week 32</button>
  <button onclick="visualise('ldavis_el58601401036016732647332626198', ldavis_el58601401036016732647332626198_data)">Sample</button>
  <button onclick="visualise('ldavis_el716421126754284165291324392', ldavis_el716421126754284165291324392_data)">Tattle_Sample</button>
<div id="superdiv"></div>

</body>
<script type="text/javascript" src="ldavis.v1.0.1.js"></script>
<script type="text/javascript" src="d3.min.js"></script>
<script type="text/javascript" src="data.js"></script>
<script type="text/javascript">

function LDAvis_load_lib(url, callback){
  var s = document.createElement('script');
  s.src = url;
  s.async = true;
  s.onreadystatechange = s.onload = callback;
  s.onerror = function(){console.warn("failed to load library " + url);};
  document.getElementsByTagName("head")[0].appendChild(s);
}

if(typeof(LDAvis) !== "undefined"){
   // already loaded: just create the visualization
   !function(LDAvis){
      //  new LDAvis("#" + "ldavis_el58601401036016732647332626198", ldavis_el58601401036016732647332626198_data);
      //  new LDAvis("#" + "ldavis_el716421126754284165291324392", ldavis_el716421126754284165291324392_data);
      //  new LDAvis("#wk31", wk31_data);
      //  new LDAvis("#wk32", wk32_data);
      allLoaded();
   }(LDAvis);
}else if(typeof define === "function" && define.amd){
   // require.js is available: use it to load d3/LDAvis
   require.config({paths: {d3: "https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min"}});
   require(["d3"], function(d3){
      window.d3 = d3;
      // new LDAvis("#" + "ldavis_el58601401036016732647332626198", ldavis_el58601401036016732647332626198_data);
      // new LDAvis("#" + "ldavis_el716421126754284165291324392", ldavis_el716421126754284165291324392_data);
      // new LDAvis("#wk31", wk31_data);
      // new LDAvis("#wk32", wk32_data);
    });
}else{
    // require.js not available: dynamically load d3 & LDAvis
    LDAvis_load_lib("https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js", function(){
         LDAvis_load_lib("ldavis.v1.0.1.js", function(){
                 
                //  new LDAvis("#" + "ldavis_el716421126754284165291324392", ldavis_el716421126754284165291324392_data);
            })
         });
}

// This function will trigger the visualisation of the latest week data by default
function allLoaded(){
  const superdiv=document.getElementById('superdiv');
}

function visualise(wkID, data){
  const parentdiv = document.getElementById('superdiv');
  var childrendiv = parentdiv.children;

  if(childrendiv.length!=0){
    for(var i=0;i<childrendiv.length;i++){
      childrendiv[i].remove();
    }
  }

  var vis = document.createElement("div");
  vis.id = wkID;
  parentdiv.appendChild(vis);
  // On passing a string, function looks for a data file.Can be used to feed data files dynamically
  new LDAvis('#' + wkID, wkID ); 
  // new LDAvis('#' + wkID, data);
}

const slider = document.getElementById('num');
const header =  document.getElementById('sliderheader');

slider.oninput = function () {
    
    console.log(this.value);

    switch (this.value) {
      case '31':
        visualise('wk31',wk31_data); 
       break;
      case '32':
        visualise('wk32', wk32_data);
        break;

      case '33':
        visualise('ldavis_el58601401036016732647332626198', ldavis_el58601401036016732647332626198_data);
        break;

      case '34':
        visualise('ldavis_el716421126754284165291324392', ldavis_el716421126754284165291324392_data);
        break;
      default:
        console.log("Slider error")
        break;
    }
    header.innerText="Slider input (Week " + this.value + ")"; 
    // visualise('wk32', wk32_data);
} 
</script>